services:
  - type: web
    name: video-downloader-api
    runtime: docker
    dockerfilePath: ./Dockerfile
    dockerCommand: sh -c "uvicorn api:app --host 0.0.0.0 --port ${PORT:-8000}"
    envVars:
      - key: LOCAL_DOWNLOAD_DIR
        value: /tmp/downloads
      - key: YT_DLP_COOKIES_FILE
        value: /tmp/cookies.txt
      - key: YT_DLP_COOKIES_CONTENT
        sync: false   # paste your cookies.txt content here in the Render dashboard

  - type: web
    name: video-downloader-ui
    runtime: docker
    dockerfilePath: ./Dockerfile
    dockerCommand: sh -c "streamlit run streamlit_app.py --server.port ${PORT:-8501} --server.address 0.0.0.0"
    envVars:
      - key: API_BASE_URL
        sync: false   # set this to your video-downloader-api Render URL, e.g. https://video-downloader-api.onrender.com
